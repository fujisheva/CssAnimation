<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,minimal-ui" >
    <meta name="renderer" content="webkit">
    <meta http-equiv="x-ua-compatible" content="IE=edge,chrome=1">
    <meta name="apple-mobile-web-app-capable" content="yes" >
    <meta name="apple-mobile-web-app-status-bar-style" content="black" >
    <meta name="format-detection" content="telephone=no,email=no" >
    <link type="text/css" rel="stylesheet" href="css/slide.css" />
    <title></title>
</head>
<body>
    <div class="container" id="scroller">
        <ul class="scroller-wrapper">
            <li class="scroller-page">
            </li>
            <li class="scroller-page"></li>
            <li class="scroller-page"></li>
            <li class="scroller-page"></li>
            <li class="scroller-page"></li>
            <li class="scroller-page"></li>

        </ul>
    </div>

<script type="text/javascript" src="js/jquery-3.0.0.min.js"></script>
<script type="text/javascript" >
    (function(scope,$){
        var _default={
          name:'Scroller',
            effect:500
        };
        var _prototype={
            _init:function(ops){
                this.options= $.extend(_default,ops);
                this._$Element=$(this);
                this._$Wrapper=this._$Element.find('.scroller-wrapper');
                this.index=0;
                this.length=this._$Wrapper.find("li").length-1;
                this.lock=false;
            },
            _handle:function(){
                var _self=this;
                this._$Element.on("mousewheel",function(e) {
                    if (_self.lock)
                        return;
                    if (e.originalEvent.wheelDelta < 0 && _self.index < _self.length) {
                        _self.index++;
                    } else if (e.originalEvent.wheelDelta > 0 && _self.index > 0) {
                        _self.index--;
                    }
                  //  console.log(_self.index)
                    _self.scroll();
                });
            },
            scroll:function(){
                var _self=this;
                if (_self.lock)
                    return;
                _self.lock = true;
                _self._trigger('start',[_self.index]);
                _self._$Wrapper.stop().animate({top: '-' + _self.index + '00%'}, _self.options.effect, function () {
                    _self.lock = false;
                    _self._trigger('end');
                });
            },
            next:function(){
                this.index++;
                this.index=this.index>this.length?this.length:this.index;
                this.scroll();
            },
            prev:function(){
                this.index--;
                this.index=this.index<0?0:this.index;
                this.scroll();
            },
            _trigger:function(event,args){
                this._$Element.trigger(event,args);
            },
            bind:function(event,callback){
                this._$Element.on(event,callback);
            }
        };
        $.fn.scroller=function(ops){
            $.extend(this,_prototype);
            this._init(ops);
            this._handle();
            this._$Element.data(this.options.name,this);

        }
    })(window,jQuery);

    $(function(){
        $("#scroller").scroller({name:'test'});
        var scroller=$("#scroller").data('test');
        scroller.bind('start',function(event,index){
            console.log(index);
        });
        scroller.bind('end',function(){
            console.log('end');
        });


    });
</script>
</body>
</html>